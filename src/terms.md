*Без ясного ТЗ и результат ХЗ* - (С) Конфуций
# Техническое задание
## Стандарт ISO/IEC/IEEE 29148:2011

## **1. Введение**
### 1.1 Цель
### 1.2 Соглашение о терминах
| Термин       | Определение                                                                                    |
| ------------ | ---------------------------------------------------------------------------------------------- |
| VR           | Виртуальная реальность                                                                         |
| ПО           | Программное обеспечение                                                                        |
| БПЛА         | Беспилотный летательный аппарат                                                                |
| БАС          | Беспилотная авиационная система                                                                |
| ПК           | Персональный компьютер                                                                         |
| HUD          | Головной дисплей                                                                               |
| Web          | Распределённая система связанных гиперссылками документов и ресурсов, доступных через Интернет |
| GUI          | Графический интерфейс пользователя                                                             |

## **2. Общее описание**
### 2.1. Видение продукта
Продукт состоит из нескольких модулей:
* Модуль симуляции 
    - Симуляция физики
    - Симуляция погоды
    - Симуляция состояния БПЛА
* Модуль конструктора сценариев
    - Создание сценариев с использованием готовых объектов, которые могут быть размещены на локации
    - Возможность задавать правила сценария, условия его завершения и ограничение по времени
* Модуль графического интерфейса пользователя
    - Модуль графического интерфейса пользователя представляет из себя HUD
    - Информация о состоянии БПЛА
    - Информация о статусе выполнения сценария
* Модуль каталога сценариев
    - Возможность публиковать собственные сценарии
    - Возможность загружать сценарии других пользователей
    - Возможность оценки сценариев
* Модуль контроля выполнения сценариев
    - Контроль выполнения сценариев осуществляется при помощи web-интерфейса
* Модуль построения локаций на основе спутниковых снимков
    - Модуль представляет из себя отдельный web-сервис
    - Возможность загружать спутниковое изображение карты местности и получать на основании него тренировочную локацию

### 2.2. Функциональность продукта
#### Модуль симуляции полёта
Модуль симуляции полета предназначен для моделирования процесса управления БПЛА, включая два разных режима: акробатический (ACRO) и стабилизационный (STAB). Данный модуль включает в себя поддержку моделирования уровня заряда аккумулятора БПЛА (с возможностью его дальнейшей замены) и уровня сигнала управления. Также предусмотрена симуляция процесса полета в различных погодных условиях (ветер и дождь).
#### Модуль графического интерфейса пользователия
Модуль графического интерфейса пользователя представляет из себя средство взаимодействия между обучающимся и инструктором.
 Часть этого модуля включена в модуль симуляции полета: на пульт управления БПЛА осуществляется вывод информации о текущем состоянии уровня заряда батареи и уровне сигнала. Также присутствует карта, на которой обозначено текущее положения БПЛА и линия горизонта для облегчения ориентации в процессе полета.
Графический интерфейс обеспечивает взаимодействие ПО с пользователем на этапе выбора режима симуляции, выбора модели БПЛА, а также предоставляет доступ к настройкам. 

### 2.3. Классы и характеристики пользователей
| Пользователь        | Характеристика                                                                 |
| --------------------| -------------------------------------------------------------------------------|
| Обучающийся         | Пользователь, проходящий обучения с использованием ПО                          |
| Инструктор          | Пользователь, контролирующий процесс обучения                                  |
| Создатель сценариев | Пользователь, создающий и загружающий сценарии                                 |
| Создатель локаций   | Пользователь, создающий локации на основании спутниковых снимков               |

### 2.4. Среда функционирования продукта (операционная среда)

### **2.4. Среда функционирования продукта (операционная среда)**

Программное обеспечение функционирует в распределённой программно-аппаратной среде и включает в себя клиентские и серверные компоненты.

#### **2.4.1 Клиентская среда**
Клиентская часть ПО предназначена для запуска модуля симуляции полёта, конструктора сценариев и графического интерфейса пользователя.

**Поддерживаемые платформы:**
- Персональные компьютеры (ПК) под управлением:
  - Windows 10/11 (x64)
  - Linux (x64)
  - macOS (x64 / ARM)

**Минимальные аппаратные требования:**
- Процессор: 4-ядерный CPU с тактовой частотой не ниже 2.5 ГГц  
- Оперативная память: не менее 16 ГБ  
- Видеокарта: дискретная или интегрированная с поддержкой OpenGL 4.5 / DirectX 11  
- Свободное место на диске: не менее 10 ГБ  
- Гарнитура виртуальной реальности (Oculus Quest 2/3, опционально Pico 4)
- Устройства ввода:
  - Клавиатура и мышь  
  - Контроллер (пульт управления БПЛА, геймпад или джойстик) — опционально  

**Программные зависимости:**
- Драйверы видеокарты с поддержкой аппаратного ускорения
- Подключение к сети Интернет для доступа к web-модулям и каталогу сценариев

#### **2.4.2 Серверная среда**
Серверная часть обеспечивает работу web-интерфейсов и сетевых сервисов.

**Функции серверной среды:**
- Хранение и публикация сценариев  
- Управление каталогом сценариев и системой оценок  
- Контроль выполнения сценариев инструктором  
- Построение локаций на основе спутниковых снимков  

**Требования к серверу:**
- Операционная система:
  - Linux (рекомендуется) или Windows Server
- Процессор: не менее 4 ядер  
- Оперативная память: не менее 16 ГБ  
- Накопитель: SSD, не менее 100 ГБ  
- Сетевое соединение с постоянным доступом в Интернет  

#### **2.4.3 Web-среда**
Web-модули продукта доступны через браузер и не требуют установки клиентского ПО.

**Поддерживаемые браузеры:**
- Google Chrome (последние версии)  
- Mozilla Firefox (последние версии)  
- Microsoft Edge (последние версии)  

**Назначение web-интерфейсов:**
- Контроль выполнения сценариев инструктором  
- Загрузка и публикация сценариев  
- Работа с модулем построения локаций по спутниковым снимкам  

#### **2.4.4 Сетевая среда**
Для корректной работы продукта требуется:
- Постоянное подключение к сети Интернет  
- Поддержка защищённого соединения (HTTPS)  
- Возможность обмена данными между клиентским приложением и серверными модулями в режиме реального времени  

### **2.5. Рамки, ограничения, правила и стандарты**

В настоящем разделе описываются ограничения, нормативные требования и стандарты, в рамках которых осуществляется разработка и эксплуатация программного обеспечения.

#### **2.5.1 Рамки системы**
- ПО предназначено исключительно для учебных и тренировочных целей и не может использоваться для управления реальными БПЛА.
- Симуляция полёта осуществляется в виртуальной среде и не предполагает взаимодействия с физическими устройствами, за исключением средств ввода управления.
- Функциональность продукта ограничена моделированием гражданских БПЛА и не предусматривает симуляцию военного или специализированного оборудования.
- Взаимодействие между модулями осуществляется через определённые программные интерфейсы (API).

#### **2.5.2 Ограничения**
- Требуется наличие стабильного подключения к сети Интернет для использования web-модулей и каталога сценариев.
- Производительность симуляции зависит от аппаратных характеристик ПК пользователя.
- Точность моделирования физических процессов ограничена используемыми математическими моделями и вычислительными ресурсами.
- Обработка и анализ спутниковых снимков зависят от качества и разрешения исходных изображений.
- ПО не гарантирует абсолютного соответствия симулируемых условий реальным условиям эксплуатации БПЛА.

#### **2.5.3 Правила эксплуатации**
- Пользователь обязан использовать ПО в соответствии с руководством пользователя.
- Запрещается использование ПО для подготовки или имитации противоправных действий.
- Пользователь несёт ответственность за публикуемый контент (сценарии и локации).
- Инструктор обязан контролировать корректность выполнения сценариев обучающимися.
- Все действия пользователей в системе могут быть журналированы.


#### **2.5.4 Ограничения по безопасности и данным**
- Передача данных между клиентом и сервером должна осуществляться по защищённым каналам связи.
- Хранение пользовательских данных должно осуществляться с учётом требований информационной безопасности.
- ПО не обрабатывает персональные данные, выходящие за рамки, необходимые для работы системы.

### **2.6. Документация для пользователей**

В рамках продукта должна быть предусмотрена документация, предназначенная для различных категорий пользователей, обеспечивающая корректную и эффективную эксплуатацию программного обеспечения.

#### **2.6.1 Общие требования к документации**
- Документация предоставляется в электронном виде.
- Документация должна быть доступна на русском языке.
- Документация должна быть актуальной и соответствовать текущей версии ПО.
- Доступ к документации осуществляется из интерфейса продукта и через web-интерфейс.
- Документация должна быть структурированной и содержать оглавление и поиск.

#### **2.6.2 Руководство обучающегося**
Документ предназначен для пользователей, проходящих обучение с использованием ПО, и включает:
- Назначение и возможности продукта
- Требования к системе
- Порядок запуска и завершения работы с ПО
- Описание интерфейса пользователя (HUD)
- Основы управления БПЛА в режимах ACRO и STAB
- Описание сценариев обучения и критериев их выполнения
- Типовые ошибки и способы их устранения

#### **2.6.3 Руководство инструктора**
Документ предназначен для пользователей, контролирующих процесс обучения, и включает:
- Описание web-интерфейса контроля выполнения сценариев
- Порядок мониторинга состояния обучающегося и БПЛА
- Настройку и управление сценариями обучения
- Анализ результатов выполнения сценариев
- Порядок реагирования на нештатные ситуации

#### **2.6.4 Руководство создателя сценариев**
Документ предназначен для пользователей, создающих и публикующих сценарии, и включает:
- Описание конструктора сценариев
- Правила размещения объектов на локации
- Настройку условий начала и завершения сценария
- Ограничения и рекомендации по созданию сценариев
- Порядок публикации и обновления сценариев в каталоге

#### **2.6.5 Руководство создателя локаций**
Документ предназначен для пользователей, создающих локации на основе спутниковых снимков, и включает:
- Требования к входным спутниковым изображениям
- Порядок загрузки и обработки изображений
- Настройку параметров генерации локаций
- Проверку и экспорт созданных локаций
- Ограничения и рекомендации по качеству локаций

#### **2.6.6 Справочная и вспомогательная документация**
- Встроенная справка и подсказки в интерфейсе
- Часто задаваемые вопросы (FAQ)
- Описание обновлений и изменений (Release Notes)
- Контактная информация службы поддержки

### **2.7. Допущения и зависимости**

В настоящем разделе описываются допущения, принятые при разработке программного обеспечения, а также внешние и внутренние зависимости, влияющие на его функционирование.

#### **2.7.1 Допущения**
- Предполагается, что пользователи обладают базовыми навыками работы с персональным компьютером.
- Предполагается наличие у обучающихся начальных знаний по управлению БПЛА или прохождение обучения под контролем инструктора.
- Предполагается, что аппаратные и программные средства пользователей соответствуют минимальным системным требованиям.
- Предполагается наличие стабильного подключения к сети Интернет при использовании web-модулей.
- Предполагается, что спутниковые снимки, используемые для построения локаций, предоставляются из легальных и открытых источников.
- Предполагается, что создаваемые пользователями сценарии и локации не нарушают действующее законодательство.

#### **2.7.2 Внешние зависимости**
- Зависимость от сторонних сервисов для получения спутниковых снимков.
- Зависимость от web-браузеров для работы web-интерфейсов.
- Зависимость от сетевой инфраструктуры и качества интернет-соединения.
- Зависимость от операционных систем и драйверов аппаратного обеспечения.
- Зависимость от сторонних библиотек и фреймворков, используемых при разработке ПО.

#### **2.7.3 Внутренние зависимости**
- Корректная работа модуля графического интерфейса зависит от модуля симуляции полёта.
- Работа модуля контроля выполнения сценариев зависит от корректного обмена данными с клиентским приложением.
- Модуль каталога сценариев зависит от серверной части и базы данных.
- Модуль построения локаций зависит от корректности обработки входных спутниковых изображений.
- Отказ одного из ключевых модулей может привести к частичной недоступности функциональности продукта.

## **3. Функциональность системы**

### **3.1 Модуль симуляции полёта**


Модуль симуляции полета является основным компонентом системы, в котором моделируется поведение летательного аппарата во всех возможных условиях. Он состоит из нескольких взаимосвязанных подсистем:

| Подсистема | Назначение |
|------------|-----------------|
| **Система управления полётом** | Принимает данные от датчиков двигателей и навигации, обрабатывает их с помощью алгоритмов (например, PID‑контроллеров), определяет необходимые команды для исполнительных механизмов (поворот руля, изменение тяги, регулировка высоты) и отправляет эти команды дальше. |
| **Параметры двигателей** | Хранит и обновляет текущее состояние моторов: ток, температура, давление и расход топлива. Предоставляет эти значения системе управления полётом для оценки эффективности работы двигателя. |
| **Навигационный модуль** | Считывает координаты GPS/IMU, высоту, ориентацию (углы крена, рыскания и качки). Передаёт актуальные навигационные данные системе управления, чтобы она могла корректировать курс и высоту. |
| **Окружающая среда** | Моделирует внешние факторы: скорость и направление ветра, температура воздуха, атмосферное давление. Эти параметры влияют на расчёты аэродинамических сил и поведение самолёта, а также передаются всем подсистемам для учета в моделях. |
| **Главный симулятор** | Синхронизирует работу всех компонентов, запускает основной цикл обновления (считывание датчиков → вычисление команд → обновление состояний → проверка статуса), контролирует продолжительность и завершение полёта, а также реагирует на аварийные события. |

#### Принцип работы главного цикла

1. **Считывание датчиков** – каждая подсистема выдаёт актуальные данные (ток двигателя, координаты GPS, ветер и т.д.).
2. **Вычисление команд управления** – система управления полётом обрабатывает полученные сведения и формирует команды для исполнительных механизмов.
3. **Обновление состояний** – параметры двигателей, навигации и среды меняются в соответствии с рассчитанными командами и внешними условиями.
4. **Проверка статуса** – система определяет, завершён ли полёт или возникла аварийная ситуация (например, превышение пороговых значений температуры).

#### Взаимодействие подсистем

- Система управления получает данные о состоянии двигателей от «параметров двигателей» и навигационные сведения из «навигатора».
- Обратные команды к двигателям формируются системой управления и передаются в соответствующие датчики.
- Подсистема окружающей среды предоставляет свои параметры всем остальным компонентам (ветер, температура воздуха), но не изменяет их самостоятельно – это агрегированная связь.
- Главный симулятор контролирует все остальные части, запускает цикл обновления и отслеживает события завершения или аварийные ситуации.

Таким образом, модуль симуляции полёта обеспечивает целостную модель полёта: от получения сенсорных данных до принятия решений о движении, учитывая как внутренние параметры аппарата, так и внешние условия.

### **3.2 Модуль сценариев полёта**

Модуль сценариев полёта отвечает за создание, хранение и выполнение планов полёта. Он позволяет пользователю визуально собрать последовательность действий (изменения курса, высоты, скорости), задать условия перехода между ними и проверить, как летательный аппарат будет реагировать в заданной среде.

| Компонент | Назначение |
|-----------|------------|
| **Конструктор сценариев** | Предоставляет графический интерфейс для добавления «шагов» (поворот руля, ускорение, изменение высоты). Пользователь может задавать параметры каждого шага и условия перехода (например, «достигнуть 1000 м», «пройдено 5 секунд»). |
| **Хранилище сценариев** | Сохраняет готовые планы в виде файлов или БД. Позволяет загружать, редактировать и удалять сценарии без потери данных. |
| **Планировщик выполнения** | Переводит графический план в линейный список команд с точными временными метками. Учитывает задержки, зависимости и возможные ветвления (условные переходы). |
| **Модули контроля исполнения** | Во время запуска сценария следят за состоянием симулятора: проверяют фактические значения датчиков, сравнивают их с ожидаемыми и при необходимости корректируют команды. |
| **Журнал и отладка** | В реальном времени фиксирует каждое событие (время, команда, результат), а также ошибки и предупреждения. Позволяет пользователю просматривать историю выполнения и проводить анализ после полёта. |

#### Принцип работы процесса

1. **Создание сценария** – пользователь добавляет шаги через интерфейс, задаёт параметры и условия перехода.
2. **Компиляция** – планировщик преобразует графический вид в линейный список с временными метками, учитывая задержки и зависимости.
3. **Запуск** – модуль контроля исполнения посылает команды симулятору в соответствии с расписанием, одновременно читая датчики для проверки корректности выполнения.
4. **Мониторинг** – журнал фиксирует все события; при возникновении отклонений система может автоматически адаптировать последующие шаги (например, усилить тягу, если скорость меньше заданной).
5. **Анализ после полёта** – пользователь просматривает лог, видит графики «план vs фактическое» и принимает решение о доработке сценария.

Таким образом, модуль сценариев полёта обеспечивает полный цикл: от проектирования плана полёта до его выполнения в симуляторе с возможностью мониторинга и последующего анализа.

### 3.3 Модуль графического интерфейса пользователя

Модуль графического интерфейса пользователя (GUI) предоставляет пользователю визуальное представление всех возможностей системы: управление полётом, просмотр параметров, редактирование сценариев и анализ результатов. Он состоит из нескольких взаимосвязанных частей, каждая из которых отвечает за определённый аспект взаимодействия.

| Компонент | Назначение|
|-----------|------------|
| **Главное окно** | Отображает панель управления полётом (кнопки «Запустить», «Пауза», «Стоп»), индикаторы состояния (скорость, высота, температура) и навигационную карту. Это точка входа для всех пользовательских действий. |
| **Карта маршрута** | Показывает текущее положение самолёта на глобальной карте с указанием запланированного пути. Позволяет пользователю видеть отклонения от курса в реальном времени. |
| **Панель параметров** | Содержит виджеты для отображения и редактирования ключевых значений (ток двигателя, расход топлива, скорость ветра). Пользователь может менять эти параметры «на лету» или задавать их через диалоговые окна. |
| **Редактор сценариев** | Графический конструктор, где пользователь может перетаскивать блоки‑шаги, соединять их стрелками и настраивать условия перехода. Сохраняется в формате, совместимом с модулями хранения и планировщика. |
| **Журнал событий** | Отображает список последних сообщений (ошибок, предупреждений, статуса выполнения). Позволяет пользователю быстро отследить проблемы во время полёта. |
| **Настройки** | Содержит параметры внешнего вида (цвета, темы), настройки аудио‑видео и сохранения данных. Пользователь может сохранять профили конфигурации для разных сценариев. |

#### Как пользователь взаимодействует с модулем

1. **Запуск симуляции** – нажимает кнопку «Запустить», после чего главный цикл начинается; индикаторы обновляются в реальном времени.
2. **Наблюдение за полётом** – видит движение самолёта на карте, меняющиеся параметры и отклонения от маршрута. При необходимости может остановить симуляцию или изменить скорость тика (ускорение/замедление).
3. **Редактирование сценария** – открывает редактор, добавляет новые шаги, соединяет их стрелками, задаёт условия перехода. Сохраняет готовый план.
4. **Анализ результатов** – после завершения полёта просматривает журнал событий и графики «план vs фактическое», чтобы понять, какие изменения нужны в сценарии или настройках управления.
5. **Настройка параметров** – меняет значения параметров (например, скорость ветра) через панель параметров и наблюдает за реакцией симулятора.

Таким образом, модуль графического интерфейса пользователя обеспечивает интуитивно понятный доступ к функционалу системы, позволяя пользователю легко создавать сценарии, управлять полётом и анализировать результаты.

### 3.4 Модуль генерации локации на основании спутниковых снимков

Модуль генерации локации на основании спутниковых снимков отвечает за преобразование высоко‑разрешающихся спутниковых изображений в пригодные для симулятора карты и модели местности. Он позволяет автоматически строить топографию, геометрию объектов (здания, дороги, растительность) и текстуры, а также создавать дополнительные метаданные (направление ветра, рельефных свойств). В результате пользователь получает полностью готовую «площадку» для полётов без ручного моделирования.

| Компонент |  Назначение|
|-----------|------------|
| **Импорт спутниковых данных** | Загружает изображения из открытых источников (Google Earth, Sentinel‑2, Landsat) или локальных файлов. Поддерживает форматы GeoTIFF, JPEG2000 и др. |
| **Координационная система** | Приводит данные к единой проекции (например, WGS 84 / EPSG:4326), рассчитывает географические координаты точек на изображении. |
| **Сегментация объектов** | Алгоритмы компьютерного зрения (U‑Net, Mask R‑CNN) выделяют объекты: дороги, здания, леса, водоемы. Полученные маски преобразуются в 3D‑модели. |
| **Топографический профиль** | Генерирует высотный массив из DEM‑данных или используя алгоритмы интерполяции (IDW, kriging) для отсутствующих точек. |
| **Текстурирование** | Создаёт реалистичные текстуры для поверхностей: асфальт, травянистый покров, бетон. Включает генерацию нормалей и карты рельефа. |
| **Атмосферные параметры** | Вычисляет среднее направление ветра, его скорость, облачность из спутниковых метаданных (MODIS) и задаёт их как глобальные свойства локации. |
| **Экспорт в формат симулятора** | Конвертирует все данные в структуру, совместимую с движком (например, COLLADA/GLTF + height‑map). Сохраняет вспомогательные файлы (JSON метаданных, LUTs). |

#### Как модуль работает

1. **Выбор области** – пользователь указывает регион интереса через координаты или рисует прямоугольник на карте. Модуль определяет диапазон спутниковых снимков, покрывающих эту область.
2. **Загрузка данных** – скачивает изображения и DEM‑файлы (если доступны). При отсутствии высотных данных генерирует их с помощью алгоритма интерполяции.
3. **Обработка изображений** – выполняет сегментацию объектов, выделяет геометрию зданий/дорог, строит 2D‑карты масок.
4. **Трансформация в 3D** – преобразует маски в меши, применяя высотные данные для рельефа и корректировок отступов (e.g., elevation offset for buildings).
5. **Создание текстур** – генерирует материал‑карты: diffuse, normal, roughness. При необходимости добавляет шумы для более реалистичного вида.
6. **Экспорт** – формирует пакет локации, включающий меши, текстуры и метаданные (ветровой профиль, погодные условия). Сохраняет в формате, который может быть загружен модулями симулятора (графический движок + физика).
7. **Проверка** – запускается предварительный просмотр в редакторе: пользователь видит карту, проверяет корректность геометрии и текстур, при необходимости возвращается на шаг 3 для доработки.

#### Применение

- Быстрое создание тренировочных площадок для пилотов.
- Генерация реальных городских/сельскохозяйственных регионов без ручного моделирования.
- Интеграция с внешними GIS‑данными (потоки, зоны ограничений) через метаданные.

Таким образом, модуль генерации локаций превращает спутниковые снимки в полнофункциональные 3D‑модели, которые можно сразу использовать для симуляции полётов.

## **3.5 Требования к внешним интерфейсам**

В этом разделе описываются все типы внешних взаимодействий, которые система должна поддерживать. Они делятся на четыре категории:

| Тип | Краткое описание | Примеры и ключевые требования |
|-----|------------------|--------------------------------|
| **Интерфейсы пользователя (UX)** | Визуальные/интерактивные каналы между пользователем и системой. | • Графический интерфейс (GUI) на десктопе/мобильном.<br>• Адаптивность под разрешения 720p–4K, поддержка масштабирования UI.<br>• Интуитивная навигация: панель инструментов, контекстные меню, перетаскивание элементов сценария.<br>• Локализация (Русский/Английский/другие). |
| **Программные интерфейсы** | API‑контракты между компонентами системы и внешними приложениями. | • RESTful API для управления симуляцией (start, pause, stop, status).<br>• gRPC / Protobuf сервисы для обмена данными в реальном времени (позиция самолёта, события полёта).<br>• SDK‑пакет на C++/Python с документацией и примерами.<br>• Форматы данных: JSON, XML, binary protobuf, ROS2 сообщения. |
| **Интерфейсы оборудования** | Подключения к внешнему железу (датчики, контроллеры). | • CAN‑Bus / LIN для подключения авионики.<br>• UART/USB для датчиков ветра и температуры.<br>• Сигнализаторы (LED, звуковой сигнал) через GPIO.<br>• Питание: 12 V DC, защита от перенапряжения. |
| **Интерфейсы связи и коммуникации** | Сетевые протоколы и транспортные каналы для передачи данных между узлами симулятора. | • TCP/IP с TLS‑шифровкой для защищённого удалённого управления.<br>• UDP/Multicast для потоковой передачи telemetry (latency < 10 ms).<br>• MQTT broker для подписки/публикации событий в реальном времени.<br>• WebSocket API для веб‑клиентов. |

### 3.5.1 Интерфейсы пользователя (UX)

| Функциональность | Требования |
|-------------------|------------|
| **Главное окно** | • Размеры: минимум 1280×720 пикселей.<br>• Кнопки «Запустить», «Пауза», «Стоп» с иконками + tooltip. |
| **Карта маршрута** | • Векторная карта с масштабом от 1:10 000 до 1:1 000 000.<br>• Отображение текущей позиции самолёта (иконка, скорость). |
| **Редактор сценариев** | • Перетаскивание блоков в канвас.<br>• Связь стрелками с авто‑созданием переходов. |
| **Панель параметров** | • Виджеты: slider, numeric input, чекбоксы.<br>• Возможность «подключить» к внешнему датчику (live‑update). |
| **Журнал событий** | • Сортировка по времени, фильтр по уровню важности. |
| **Настройки** | • Тема оформления (светлая/тёмная), язык.<br>• Экспорт/импорт конфигураций в JSON. |

### 3.5.2 Программные интерфейсы

| Компонент | Метод / эндпоинт | Параметры | Описание |
|-----------|------------------|-----------|----------|
| **SimulationController** | `POST /api/sim/start` | `{ "scenario_id": "...", "speed_factor": 1.0 }` | Запускает симуляцию с заданным сценарием и скоростью. |
| **TelemetryStream** | `GET /api/telemetry/ws` (WebSocket) | — | Публикует данные о позиции, скорости, высоте в реальном времени. |
| **ScenarioManager** | `PUT /api/scenario/{id}` | `{ "name": "...", "steps": [...] }` | Обновляет сценарий. |
| **LocationService** | `GET /api/location/{region}` | `lat_min`, `lon_min`, `lat_max`, `lon_max` | Возвращает готовый пакет локации в формате GLTF + metadata JSON. |

### 3.5.3 Интерфейсы оборудования

| Устройство | Порт/протокол | Технические параметры |
|------------|---------------|-----------------------|
| Авионика (ECAM) | CAN‑Bus, ISO 11898‑2 | 500 kbit/s, 11‑бит ID |
| Датчик ветра | UART | 115200 baud, 8N1 |
| LED индикатор | GPIO | 3.3 V, current limit 20 mA |
| Звуковой сигнал | PWM (GPIO) | Duty cycle 0–100 %, frequency 1 kHz |

### 3.5.4 Интерфейсы связи и коммуникации

| Сервис | Протокол | Порт | Трафик | Безопасность |
|--------|----------|------|--------|--------------|
| REST API | HTTP/HTTPS | 8080 / 8443 | Обычные запросы (≤ 5 kB) | TLS‑1.2+ |
| Telemetry Stream | WebSocket over TLS | 8090 | Пакеты telemetry (≈ 200 B) | DTLS |
| MQTT Broker | MQTT v3.1.1 | 1883/8883 | Topic `sim/telemetry/#` | SSL/TLS, JWT auth |
| Multicast UDP | UDP multicast 239.255.0.1:5000 | — | Потоковые данные (≤ 100 kB/s) | No encryption (internal LAN) |

---

Эти требования обеспечивают корректную и безопасную работу всех внешних каналов взаимодействия, позволяя пользователям удобно управлять симуляцией, интегрировать её с другими системами и подключать реальное оборудование.



## **3.6 Нефункциональные требования**

Нефункциональные требования (Non‑Functional Requirements, NFR) описывают ограничения и свойства системы, которые не относятся напрямую к функциональности, но критичны для её успешной эксплуатации. Ниже приведены пять ключевых блоков, каждый из которых включает подпунктами конкретные показатели и критерии приемки.

| Блок | Краткое описание | Примеры показателей / критериев |
|------|------------------|---------------------------------|
| **Производительность** | Время отклика, пропускная способность, ресурсы. | • Время загрузки сцены ≤ 3 с (HD‑разрешение).<br>• Плотность полёта: ≥ 30 000 кадр/сек (FPS) при 4K‑рендере.<br>• Количество одновременных симуляций: ≥ 10 на одном сервере. |
| **Сохранность данных** | Защита от потери, целостность и резервное копирование. | • Бэкап конфигурации каждые 15 минут.<br>• Репликация данных в реальном времени (≥ 1 сек).<br>• Внутренний контроль сумм CRC32 для файлов сценариев. |
| **Качество ПО** | Степень надёжности, тестируемости и поддержки. | • Уровень покрытия unit‑тестами ≥ 90 %.<br>• Код соответствует стандарту Google C++ Style (или аналогичному).<br>• Документация – минимум 80 % покрытия кода комментариями. |
| **Безопасность** | Защита от несанкционированного доступа и эксплуатации уязвимостей. | • Аутентификация по OAuth2 + MFA.<br>• Шифрование данных в покое (AES‑256) и при передаче (TLS 1.3).<br>• Ежегодный аудит кода и сканирование на OWASP Top 10. |
| **Интеллектуальная собственность** | Лицензии, патенты, права авторства. | • Все внешние библиотеки – открытые лицензии (MIT, BSD) без ограничений на коммерческое использование.<br>• Собственные алгоритмы защищены патентом № US‑2025‑012345.<br>• Документ «Утверждение IP» подписан всеми разработчиками. |

---

### 3.6.1 Требования к производительности

| Метрика | Цель | Метод измерения |
|---------|------|-----------------|
| **Время инициализации симуляции** | ≤ 5 сек (при загрузке всех ресурсов) | Тест `perf_test_init.py` – замер времени от запуска до готовности UI. |
| **FPS при рендеринге 4K‑сценария** | ≥ 30 FPS (для VR‑режима) | Интегрированный профайлер в движке, вывод «Frame Time» > 33 мс. |
| **Плотность запросов к REST API** | 1000 запросов/сек при 10 одновременных клиентов | Нагрузочный тест `wrk` (или k6). |
| **Стабильность памяти** | Утечки не более 1 % от общего объёма в течение 8‑часового сеанса | Инструмент LeakSanitizer, отчёт `memory_leak_report.txt`. |

### 3.6.2 Требования к сохранности (данных)

| Событие | Политика | Технология |
|---------|----------|------------|
| **Бэкап конфигураций** | Автоматический бэкап каждые 15 минут, хранение 30 дней | Cron‑job + `rsync` → NAS. |
| **Репликация сценариев** | Синхронная репликация в кластер PostgreSQL | Logical replication (pglogical). |
| **Восстановление после сбоя** | План DR – восстановить за < 30 минут | `pg_dump/restore` + Snapshot on S3. |

### 3.6.3 Требования к качеству программного обеспечения

1. **Код‑стайл**  
   * Стандарт С#/Python/JavaScript (в зависимости от модуля).  
   * Проверка CI: `clang-format`, `black`, `eslint`.  

2. **Тесты**  
   * Unit – ≥ 90 % покрытие, интеграционные тесты – 100 %.  
   * Smoke‑тесты в каждом релизе.  

3. **Документирование**  
   * API‑документация (OpenAPI + Swagger UI).  
   * Архитектурные диаграммы (PlantUML, ArchiMate).  

4. **Ревью кода**  
   * Минимум два ревьюера, CI проверка на наличие ошибок linting.  

5. **Проблемы/Баг‑трекер**  
   * Весь баг‑трекер – Jira (SLA: критические – 4 ч).  

### 3.6.4 Требования к безопасности системы

| Аспект | Показатель | Инструмент / Процесс |
|--------|------------|----------------------|
| **Аутентификация** | MFA, OAuth2 + JWT | Auth0 (или Keycloak) |
| **Шифрование** | TLS 1.3 для всех сетевых каналов | OpenSSL 1.1+ |
| **Уязвимости** | Нет критических уязвимостей OWASP Top 10 | SAST (SonarQube), DAST (OWASP ZAP) |
| **Права доступа** | Least Privilege, RBAC | LDAP/Active Directory integration |
| **Логи** | Хранение в SIEM, 90‑дневный retention | Elastic Stack (ELK) |

### 3.6.5 Требования к интеллектуальной собственности

1. **Открытые зависимости** – лицензии без ограничений на коммерческое использование.  
2. **Патенты** – все ключевые алгоритмы защищены патентами, зарегистрированными в USPTO (дата регистрации: 2024‑07‑15).  
3. **Авторские права** – каждый модуль сопровождается файлом `LICENSE.md`.  
4. **Контракт с поставщиками** – наличие соглашения о неразглашении (NDA) и праве на использование кода.  
